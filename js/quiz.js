"use strict";var form=function(){var r=document.querySelector(".js-send-form"),e=r.querySelector("button[type=submit]"),c=document.querySelector(".quiz"),o=document.querySelector(".overlay");function t(e){for(var t=e.querySelectorAll(".v-req"),n=0;n<t.length;n++){var i=t[n];i.classList.contains("_email")?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(i.value)?u(i):(s(i),0):"checkbox"===i.getAttribute("type")&&!1===i.checked?(s(i),0):""===i.value?(s(i),0):u(i)}}function s(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function u(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}e.addEventListener("click",function(){t(r)}),r.addEventListener("change",function(){t(r)}),r.addEventListener("submit",function(e){e.preventDefault();var t=new XMLHttpRequest;t.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&200===this.status?(r.innerHTML='<div class="quiz__final">\n\t\t\t\t\t\t<img class="quiz__final-img" src="img/quiz/final-icon.png" alt="">\n\t\t\t\t\t\t<div class="quiz__form-title">\n\t\t\t\t\t\t\tС пасибо за прохождение теста!\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button class="btn btn--transparent quiz__final-btn">ОК</button>\n\t\t\t\t\t</div>',r.querySelector(".quiz__final-btn").addEventListener("click",function(){c.classList.remove("active"),o.classList.remove("active");var e=document.querySelector("html");e.style.overflow="",e.style.marginRight="0px"})):404===this.status&&console.log("Ашипка")},t.open(r.method,r.action,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var n=new FormData(r),i=null;n.forEach(function(e,t){i+="&"+t+"="+e}),i&&t.send(i)})};function quiz(){var n=document.querySelector(".quiz"),e=n.querySelector(".quiz__content"),i=document.querySelector(".quiz__btn--prev"),r=document.querySelector(".quiz__btn--next"),c=document.querySelector(".quiz__current"),t=document.querySelector(".quiz__image-slider"),o=document.querySelector(".quiz__count"),s=new Swiper(t,{spaceBetween:50,fadeEffect:{crossFade:!0},effect:"fade",allowTouchMove:!1}),u=new Swiper(e,{allowTouchMove:!1,autoHeight:!0});o.innerHTML=u.slides.length,i.addEventListener("click",function(e){e.preventDefault(),u.slidePrev(),s.slidePrev(),c.innerHTML=u.realIndex+1,u.isBeginning&&i.setAttribute("disabled","disabled")});r.addEventListener("click",function e(t){t.preventDefault(),u.slideNext(),s.slideNext(),c.innerHTML=u.realIndex+1,i.removeAttribute("disabled"),u.isEnd&&(r.removeEventListener("click",e),i.setAttribute("disabled","disabled"),r.addEventListener("click",function(e){e.preventDefault(),setTimeout(function(){n.classList.add("quiz--ended")},400)}))})}form(),quiz();