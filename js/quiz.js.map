{"version":3,"sources":["quiz.js"],"names":["form","document","querySelector","button","quiz","overlay","addEventListener","validate","e","preventDefault","request","XMLHttpRequest","onreadystatechange","readyState","DONE","status","innerHTML","classList","remove","html","style","overflow","marginRight","console","log","open","method","action","setRequestHeader","data","FormData","dataPost","forEach","value","key","send","error","elems","querySelectorAll","index","length","input","contains","emailTest","formAddError","formRemoveError","getAttribute","checked","parentElement","add","test","quizWrapper","prev","next","current","imageSliderEl","countSlides","imageSlider","Swiper","spaceBetween","fadeEffect","crossFade","effect","allowTouchMove","slider","autoHeight","slides","slidePrev","realIndex","isBeginning","setAttribute","nextEvent","slideNext","removeAttribute","isEnd","removeEventListener","setTimeout"],"mappings":"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","sourcesContent":["const form = () => {\r\n\tlet form = document.querySelector('.js-send-form')\r\n\tlet button = form.querySelector('button[type=submit]')\r\n\tlet quiz = document.querySelector('.quiz')\r\n\tlet overlay = document.querySelector('.overlay')\r\n\r\n\tbutton.addEventListener('click', () => {\r\n\t\tvalidate(form)\r\n\t})\r\n\r\n\tform.addEventListener('change', () => {\r\n\t\tvalidate(form)\r\n\t})\r\n\r\n\tform.addEventListener('submit', (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet request = new XMLHttpRequest()\r\n\r\n\t\trequest.onreadystatechange = function () {\r\n\t\t\tif (this.readyState === XMLHttpRequest.DONE && this.status === 200) {\r\n\t\t\t\tform.innerHTML =\r\n\t\t\t\t\t`<div class=\"quiz__final\">\r\n\t\t\t\t\t\t<img class=\"quiz__final-img\" src=\"img/quiz/final-icon.png\" alt=\"\">\r\n\t\t\t\t\t\t<div class=\"quiz__form-title\">\r\n\t\t\t\t\t\t\tС пасибо за прохождение теста!\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button class=\"btn btn--transparent quiz__final-btn\">ОК</button>\r\n\t\t\t\t\t</div>`\r\n\t\t\t\tform.querySelector('.quiz__final-btn').addEventListener('click', () => {\r\n\t\t\t\t\tquiz.classList.remove('active')\r\n\t\t\t\t\toverlay.classList.remove('active')\r\n\t\t\t\t\tconst html = document.querySelector('html')\r\n\t\t\t\t\thtml.style.overflow = ''\r\n\t\t\t\t\thtml.style.marginRight = `0px`\r\n\t\t\t\t})\r\n\t\t\t} else if (this.status === 404) {\r\n\r\n\t\t\t\tconsole.log('Ашипка')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\trequest.open(form.method, form.action, true)\r\n\t\trequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\r\n\r\n\t\tlet data = new FormData(form)\r\n\t\tlet dataPost = null\r\n\r\n\t\t// Формируем массив данных для отправки \r\n\t\tdata.forEach(function (value, key) {\r\n\t\t\tdataPost += '&' + key + '=' + value\r\n\t\t})\r\n\r\n\t\tif (dataPost) {\r\n\t\t\trequest.send(dataPost)\r\n\t\t}\r\n\t})\r\n\r\n\tfunction validate(form) {\r\n\t\tlet error = 0\r\n\t\tlet elems = form.querySelectorAll('.v-req')\r\n\r\n\t\tfor (let index = 0; index < elems.length; index++) {\r\n\t\t\tconst input = elems[index]\r\n\r\n\t\t\tif (input.classList.contains('_email')) {\r\n\t\t\t\tif (emailTest(input)) {\r\n\t\t\t\t\tformAddError(input)\r\n\t\t\t\t\terror++\r\n\t\t\t\t} else {\r\n\t\t\t\t\tformRemoveError(input)\r\n\t\t\t\t}\r\n\t\t\t} else if (input.getAttribute(\"type\") === \"checkbox\" && input.checked === false) {\r\n\t\t\t\tformAddError(input)\r\n\t\t\t\terror++\r\n\t\t\t} else if (input.value === '') {\r\n\t\t\t\tformAddError(input)\r\n\t\t\t\terror++\r\n\t\t\t} else {\r\n\t\t\t\tformRemoveError(input)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction formAddError(input) {\r\n\t\tinput.parentElement.classList.add('_error')\r\n\t\tinput.classList.add('_error')\r\n\t}\r\n\r\n\tfunction formRemoveError(input) {\r\n\t\tinput.parentElement.classList.remove('_error')\r\n\t\tinput.classList.remove('_error')\r\n\t}\r\n\r\n\tfunction emailTest(input) {\r\n\t\treturn !/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,8})+$/.test(input.value);\r\n\t}\r\n\r\n}\r\n\r\nform()\r\n\r\n\r\nfunction quiz() {\r\n\tlet quizWrapper = document.querySelector('.quiz')\r\n\tlet quiz = quizWrapper.querySelector('.quiz__content')\r\n\tlet prev = document.querySelector('.quiz__btn--prev')\r\n\tlet next = document.querySelector('.quiz__btn--next')\r\n\tlet current = document.querySelector('.quiz__current')\r\n\tlet imageSliderEl = document.querySelector('.quiz__image-slider')\r\n\tlet countSlides = document.querySelector('.quiz__count')\r\n\r\n\tconst imageSlider = new Swiper(imageSliderEl, {\r\n\t\tspaceBetween: 50,\r\n\t\tfadeEffect: {\r\n\t\t\tcrossFade: true\r\n\t\t},\r\n\t\teffect: 'fade',\r\n\t\tallowTouchMove: false,\r\n\t})\r\n\r\n\tconst slider = new Swiper(quiz, {\r\n\t\tallowTouchMove: false,\r\n\t\tautoHeight: true,\r\n\t})\r\n\r\n\tcountSlides.innerHTML = slider.slides.length\r\n\r\n\tprev.addEventListener('click', (e) => {\r\n\t\te.preventDefault()\r\n\t\tslider.slidePrev()\r\n\t\timageSlider.slidePrev()\r\n\t\tcurrent.innerHTML = slider.realIndex + 1\r\n\r\n\t\tif (slider.isBeginning) {\r\n\t\t\tprev.setAttribute('disabled', 'disabled')\r\n\t\t}\r\n\t})\r\n\r\n\tconst nextEvent = (e) => {\r\n\t\te.preventDefault()\r\n\t\tslider.slideNext()\r\n\t\timageSlider.slideNext()\r\n\t\tcurrent.innerHTML = slider.realIndex + 1\r\n\t\tprev.removeAttribute('disabled')\r\n\r\n\t\tif (slider.isEnd) {\r\n\t\t\tnext.removeEventListener('click', nextEvent)\r\n\t\t\tprev.setAttribute('disabled', 'disabled')\r\n\r\n\t\t\tnext.addEventListener('click', (e) => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tquizWrapper.classList.add('quiz--ended')\r\n\t\t\t\t}, 400)\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tnext.addEventListener('click', nextEvent)\r\n}\r\n\r\nquiz()"],"file":"quiz.js"}